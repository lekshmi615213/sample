function drawPie(t,e,r){var n=d3.scale.category20(),a=d3.layout.pie().sort(null),i=d3.svg.arc().innerRadius(r/3).outerRadius(r/2),d=d3.select(t).append("svg").attr("width",1.5*r).attr("height",r).append("g").attr("transform","translate("+1.5*r/2+","+r/2+")");d.selectAll("path").data(a(e)).enter().append("path").attr("fill",function(t,e){return n(e)}).attr("d",i)}function drawFill(t,e,r,n){for(var a,i=[],d=0,c=d3.select(t).append("svg").attr({width:n,height:2.3*n}).attr("class","fill"),o=0;o<e.length;o++)a={value:e[o],colour:r[o],x:0,y:d},d+=e[o],i.push(a);var l=c.selectAll("rect").data(i);l.enter().append("rect").attr({width:n/2.5,height:function(t){return t.value},y:function(t){return t.y}}).style({fill:function(t){return t.colour}})}function drawBar(t,e){var r=25,n=170,a=26,i=15,d=d3.scale.category20(),c=d3.scale.linear().domain([0,1]).range([0,r+i]),o=d3.scale.linear().domain([0,d3.max(e)]).rangeRound([0,n-a]),l=d3.select(t).append("svg").attr("class","chart").attr("width",230).attr("height",n);l.selectAll("rect").data(e).enter().append("rect").attr("x",function(t,e){return c(e)-.5}).attr("y",function(t){return n-.5}).attr("width",r).attr("fill",function(t,e){return d(e)}).transition().delay(function(t,e){return 600*e}).duration(800).attr("height",function(t){return o(t)}).attr("y",function(t){return n-o(t)-.5}),l.selectAll("text").data(e).enter().append("text").attr("width",r).attr("x",function(t,e){return c(e)+r/2}).attr("y",function(t){return n-o(t)-15}).attr("text-anchor","middle").transition().delay(function(t,e){return 600*e}).duration(800).text(function(t){return"$"+t})}$(document).ready(function(){var t,e=new XMLHttpRequest;e.open("GET","js/d3.json",!0),e.setRequestHeader("Content-type","application/json"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){t=JSON.parse(e.responseText);var r=document.getElementById("project-pie"),n=document.getElementById("fill-chart"),a=document.getElementById("risk-chart"),i=document.getElementById("issue-chart"),d=document.getElementById("nav-first"),c=document.getElementById("nav-second"),o=document.getElementById("a-first"),l=document.getElementById("a-second"),s=document.getElementById("numerical-first"),u=document.getElementById("numerical-second"),m=document.getElementById("af-first"),p=document.getElementById("af-second"),f=document.getElementById("big-image");drawPie(r,t.projectPie,100),drawFill(n,t.fillBar,t.fillColor,75),drawBar(a,t.riskBar),drawBar(i,t.issueBar),drawPie(d,t.projectPie,40),drawPie(c,t.portfolio,40),drawPie(o,t.halfValue,40),drawPie(l,t.projectPie,40),drawPie(l,t.projectPie,40),drawPie(s,t.projectPie,40),drawPie(u,t.projectPie,40),drawPie(m,t.projectPie,40),drawPie(p,t.projectPie,40),drawPie(f,t.employees,400)}},e.send(),$(function(){$("#nav-section").niceScroll({cursorcolor:"#AEC7E8"})});var r=$(".excited:first-child",".active").text();$("#heading").html(r),$("#major-container").children().click(function(){var e,n;n=document.getElementById("big-image"),$(this).addClass("active"),$(this).siblings().removeClass("active"),r=$(".excited:first-child",".active").text(),$("#heading").html(r);$(this).attr("class");e=$(this).prop("id"),$("#big-image").empty(),drawPie(n,t[e],400)})});